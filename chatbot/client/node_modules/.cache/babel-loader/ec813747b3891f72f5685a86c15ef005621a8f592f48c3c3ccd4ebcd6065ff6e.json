{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _d3Drag = require(\"d3-drag\");\nvar _d3Force = require(\"d3-force\");\nvar _d3Selection = require(\"d3-selection\");\nvar _d3Zoom = require(\"d3-zoom\");\nvar _graph = _interopRequireDefault(require(\"./graph.const\"));\nvar _graph2 = _interopRequireDefault(require(\"./graph.config\"));\nvar _err = _interopRequireDefault(require(\"../../err\"));\nvar _collapse = require(\"./collapse.helper\");\nvar _graph3 = require(\"./graph.helper\");\nvar _graph4 = require(\"./graph.renderer\");\nvar _utils = require(\"../../utils\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n/**\n * Graph component is the main component for react-d3-graph components, its interface allows its user\n * to build the graph once the user provides the data, configuration (optional) and callback interactions (also optional).\n * The code for the [live example](https://danielcaldas.github.io/react-d3-graph/sandbox/index.html)\n * can be consulted [here](https://github.com/danielcaldas/react-d3-graph/blob/master/sandbox/Sandbox.jsx)\n * @example\n * import { Graph } from 'react-d3-graph';\n *\n * // graph payload (with minimalist structure)\n * const data = {\n *     nodes: [\n *       {id: 'Harry'},\n *       {id: 'Sally'},\n *       {id: 'Alice'}\n *     ],\n *     links: [\n *         {source: 'Harry', target: 'Sally'},\n *         {source: 'Harry', target: 'Alice'},\n *     ]\n * };\n *\n * // the graph configuration, you only need to pass down properties\n * // that you want to override, otherwise default ones will be used\n * const myConfig = {\n *     nodeHighlightBehavior: true,\n *     node: {\n *         color: 'lightgreen',\n *         size: 120,\n *         highlightStrokeColor: 'blue'\n *     },\n *     link: {\n *         highlightColor: 'lightblue'\n *     }\n * };\n *\n * // Callback to handle click on the graph.\n * // @param {Object} event click dom event\n * const onClickGraph = function(event) {\n *      window.alert('Clicked the graph background');\n * };\n *\n * const onClickNode = function(nodeId, node) {\n *      window.alert('Clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onDoubleClickNode = function(nodeId, node) {\n *      window.alert('Double clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onRightClickNode = function(event, nodeId, node) {\n *      window.alert('Right clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onMouseOverNode = function(nodeId, node) {\n *      window.alert(`Mouse over node ${nodeId} in position (${node.x}, ${node.y})`);\n * };\n *\n * const onMouseOutNode = function(nodeId, node) {\n *      window.alert(`Mouse out node ${nodeId} in position (${node.x}, ${node.y})`);\n * };\n *\n * const onClickLink = function(source, target) {\n *      window.alert(`Clicked link between ${source} and ${target}`);\n * };\n *\n * const onRightClickLink = function(event, source, target) {\n *      window.alert('Right clicked link between ${source} and ${target}');\n * };\n *\n * const onMouseOverLink = function(source, target) {\n *      window.alert(`Mouse over in link between ${source} and ${target}`);\n * };\n *\n * const onMouseOutLink = function(source, target) {\n *      window.alert(`Mouse out link between ${source} and ${target}`);\n * };\n *\n * const onNodePositionChange = function(nodeId, x, y) {\n *      window.alert(`Node ${nodeId} moved to new position x= ${x} y= ${y}`);\n * };\n *\n * // Callback that's called whenever the graph is zoomed in/out\n * // @param {number} previousZoom the previous graph zoom\n * // @param {number} newZoom the new graph zoom\n * const onZoomChange = function(previousZoom, newZoom) {\n *      window.alert(`Graph is now zoomed at ${newZoom} from ${previousZoom}`);\n * };\n *\n *\n * <Graph\n *      id='graph-id' // id is mandatory, if no id is defined rd3g will throw an error\n *      data={data}\n *      config={myConfig}\n *      onClickGraph={onClickGraph}\n *      onClickNode={onClickNode}\n *      onDoubleClickNode={onDoubleClickNode}\n *      onRightClickNode={onRightClickNode}\n *      onClickLink={onClickLink}\n *      onRightClickLink={onRightClickLink}\n *      onMouseOverNode={onMouseOverNode}\n *      onMouseOutNode={onMouseOutNode}\n *      onMouseOverLink={onMouseOverLink}\n *      onMouseOutLink={onMouseOutLink}\n *      onNodePositionChange={onNodePositionChange}\n *      onZoomChange={onZoomChange}/>\n */\nvar Graph = /*#__PURE__*/function (_React$Component) {\n  _inherits(Graph, _React$Component);\n  _createClass(Graph, [{\n    key: \"_graphLinkForceConfig\",\n    /**\n     * Obtain a set of properties which will be used to perform the focus and zoom animation if\n     * required. In case there's not a focus and zoom animation in progress, it should reset the\n     * transition duration to zero and clear transformation styles.\n     * @returns {Object} - Focus and zoom animation properties.\n     */\n\n    /**\n     * This method runs {@link d3-force|https://github.com/d3/d3-force}\n     * against the current graph.\n     * @returns {undefined}\n     */\n    value: function _graphLinkForceConfig() {\n      var forceLink = (0, _d3Force.forceLink)(this.state.d3Links).id(function (l) {\n        return l.id;\n      }).distance(this.state.config.d3.linkLength).strength(this.state.config.d3.linkStrength);\n      this.state.simulation.force(_graph[\"default\"].LINK_CLASS_NAME, forceLink);\n    }\n    /**\n     * This method runs {@link d3-drag|https://github.com/d3/d3-drag}\n     * against the current graph.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"_graphNodeDragConfig\",\n    value: function _graphNodeDragConfig() {\n      var customNodeDrag = (0, _d3Drag.drag)().on(\"start\", this._onDragStart).on(\"drag\", this._onDragMove).on(\"end\", this._onDragEnd);\n      (0, _d3Selection.select)(\"#\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID)).selectAll(\".node\").call(customNodeDrag);\n    }\n    /**\n     * Sets d3 tick function and configures other d3 stuff such as forces and drag events.\n     * Whenever called binds Graph component state with d3.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"_graphBindD3ToReactComponent\",\n    value: function _graphBindD3ToReactComponent() {\n      if (!this.state.config.d3.disableLinkForce) {\n        this.state.simulation.nodes(this.state.d3Nodes).on(\"tick\", this._tick);\n        this._graphLinkForceConfig();\n      }\n      if (!this.state.config.freezeAllDragEvents) {\n        this._graphNodeDragConfig();\n      }\n    }\n    /**\n     * Handles d3 drag 'end' event.\n     * @returns {undefined}\n     */\n  }]);\n\n  function Graph(props) {\n    var _this;\n    _classCallCheck(this, Graph);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Graph).call(this, props));\n    _defineProperty(_assertThisInitialized(_this), \"_generateFocusAnimationProps\", function () {\n      // In case an older animation was still not complete, clear previous timeout to ensure the new one is not cancelled\n      if (_this.state.enableFocusAnimation) {\n        if (_this.focusAnimationTimeout) {\n          clearTimeout(_this.focusAnimationTimeout);\n        }\n        _this.focusAnimationTimeout = setTimeout(function () {\n          return _this.setState({\n            enableFocusAnimation: false\n          });\n        }, _this.state.config.focusAnimationDuration * 1000);\n      }\n      var transitionDuration = _this.state.enableFocusAnimation ? _this.state.config.focusAnimationDuration : 0;\n      return {\n        style: {\n          transitionDuration: \"\".concat(transitionDuration, \"s\")\n        },\n        transform: _this.state.focusTransformation\n      };\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_onDragEnd\", function () {\n      _this.isDraggingNode = false;\n      if (_this.state.draggedNode) {\n        _this.onNodePositionChange(_this.state.draggedNode);\n        _this._tick({\n          draggedNode: null\n        });\n      }\n      !_this.state.config.staticGraph && _this.state.config.automaticRearrangeAfterDropNode && _this.state.simulation.alphaTarget(_this.state.config.d3.alphaTarget).restart();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_onDragMove\", function (ev, index, nodeList) {\n      var id = nodeList[index].id;\n      if (!_this.state.config.staticGraph) {\n        // this is where d3 and react bind\n        var draggedNode = _this.state.nodes[id];\n        draggedNode.oldX = draggedNode.x;\n        draggedNode.oldY = draggedNode.y;\n        draggedNode.x += _d3Selection.event.dx;\n        draggedNode.y += _d3Selection.event.dy; // set nodes fixing coords fx and fy\n\n        draggedNode[\"fx\"] = draggedNode.x;\n        draggedNode[\"fy\"] = draggedNode.y;\n        _this._tick({\n          draggedNode: draggedNode\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_onDragStart\", function () {\n      _this.isDraggingNode = true;\n      _this.pauseSimulation();\n      if (_this.state.enableFocusAnimation) {\n        _this.setState({\n          enableFocusAnimation: false\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_setNodeHighlightedValue\", function (id) {\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return _this._tick((0, _graph3.updateNodeHighlightedValue)(_this.state.nodes, _this.state.links, _this.state.config, id, value));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_tick\", function () {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var cb = arguments.length > 1 ? arguments[1] : undefined;\n      return cb ? _this.setState(state, cb) : _this.setState(state);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_zoomConfig\", function () {\n      var selector = (0, _d3Selection.select)(\"#\".concat(_this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID));\n      var zoomObject = (0, _d3Zoom.zoom)().scaleExtent([_this.state.config.minZoom, _this.state.config.maxZoom]);\n      if (!_this.state.config.freezeAllDragEvents) {\n        zoomObject.on(\"zoom\", _this._zoomed);\n      }\n      if (_this.state.config.initialZoom !== null) {\n        zoomObject.scaleTo(selector, _this.state.config.initialZoom);\n      } // avoid double click on graph to trigger zoom\n      // for more details consult: https://github.com/danielcaldas/react-d3-graph/pull/202\n\n      selector.call(zoomObject).on(\"dblclick.zoom\", null);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_zoomed\", function () {\n      var transform = _d3Selection.event.transform;\n      (0, _d3Selection.selectAll)(\"#\".concat(_this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_CONTAINER_ID)).attr(\"transform\", transform);\n      _this.state.config.panAndZoom && _this.setState({\n        transform: transform.k\n      }); // only send zoom change events if the zoom has changed (_zoomed() also gets called when panning)\n\n      if (_this.debouncedOnZoomChange && _this.state.previousZoom !== transform.k) {\n        _this.debouncedOnZoomChange(_this.state.previousZoom, transform.k);\n        _this.setState({\n          previousZoom: transform.k\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClickGraph\", function (e) {\n      var _e$target, _e$target$attributes, _e$target$attributes$;\n      if (_this.state.enableFocusAnimation) {\n        _this.setState({\n          enableFocusAnimation: false\n        });\n      } // Only trigger the graph onClickHandler, if not clicked a node or link.\n      // toUpperCase() is added as a precaution, as the documentation says tagName should always\n      // return in UPPERCASE, but chrome returns lowercase\n\n      var tagName = e.target && e.target.tagName;\n      var name = e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : (_e$target$attributes = _e$target.attributes) === null || _e$target$attributes === void 0 ? void 0 : (_e$target$attributes$ = _e$target$attributes.name) === null || _e$target$attributes$ === void 0 ? void 0 : _e$target$attributes$.value;\n      var svgContainerName = \"svg-container-\".concat(_this.state.id);\n      if (tagName.toUpperCase() === \"SVG\" && name === svgContainerName) {\n        _this.props.onClickGraph && _this.props.onClickGraph(e);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClickNode\", function (clickedNodeId) {\n      var clickedNode = _this.state.nodes[clickedNodeId];\n      if (_this.state.config.collapsible) {\n        var leafConnections = (0, _collapse.getTargetLeafConnections)(clickedNodeId, _this.state.links, _this.state.config);\n        var links = (0, _collapse.toggleLinksMatrixConnections)(_this.state.links, leafConnections, _this.state.config);\n        var d3Links = (0, _collapse.toggleLinksConnections)(_this.state.d3Links, links);\n        var firstLeaf = leafConnections === null || leafConnections === void 0 ? void 0 : leafConnections[\"0\"];\n        var isExpanding = false;\n        if (firstLeaf) {\n          var visibility = links[firstLeaf.source][firstLeaf.target];\n          isExpanding = visibility === 1;\n        }\n        _this._tick({\n          links: links,\n          d3Links: d3Links\n        }, function () {\n          _this.props.onClickNode && _this.props.onClickNode(clickedNodeId, clickedNode);\n          if (isExpanding) {\n            _this._graphNodeDragConfig();\n          }\n        });\n      } else {\n        if (!_this.nodeClickTimer) {\n          _this.nodeClickTimer = setTimeout(function () {\n            _this.props.onClickNode && _this.props.onClickNode(clickedNodeId, clickedNode);\n            _this.nodeClickTimer = null;\n          }, _graph[\"default\"].TTL_DOUBLE_CLICK_IN_MS);\n        } else {\n          _this.props.onDoubleClickNode && _this.props.onDoubleClickNode(clickedNodeId, clickedNode);\n          _this.nodeClickTimer = clearTimeout(_this.nodeClickTimer);\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onRightClickNode\", function (event, id) {\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onRightClickNode && _this.props.onRightClickNode(event, id, clickedNode);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOverNode\", function (id) {\n      if (_this.isDraggingNode) {\n        return;\n      }\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onMouseOverNode && _this.props.onMouseOverNode(id, clickedNode);\n      _this.state.config.nodeHighlightBehavior && _this._setNodeHighlightedValue(id, true);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOutNode\", function (id) {\n      if (_this.isDraggingNode) {\n        return;\n      }\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onMouseOutNode && _this.props.onMouseOutNode(id, clickedNode);\n      _this.state.config.nodeHighlightBehavior && _this._setNodeHighlightedValue(id, false);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOverLink\", function (source, target) {\n      _this.props.onMouseOverLink && _this.props.onMouseOverLink(source, target);\n      if (_this.state.config.linkHighlightBehavior) {\n        var highlightedLink = {\n          source: source,\n          target: target\n        };\n        _this._tick({\n          highlightedLink: highlightedLink\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOutLink\", function (source, target) {\n      _this.props.onMouseOutLink && _this.props.onMouseOutLink(source, target);\n      if (_this.state.config.linkHighlightBehavior) {\n        var highlightedLink = undefined;\n        _this._tick({\n          highlightedLink: highlightedLink\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onNodePositionChange\", function (node) {\n      if (!_this.props.onNodePositionChange) {\n        return;\n      }\n      var id = node.id,\n        x = node.x,\n        y = node.y;\n      _this.props.onNodePositionChange(id, x, y);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"pauseSimulation\", function () {\n      return _this.state.simulation.stop();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"resetNodesPositions\", function () {\n      if (!_this.state.config.staticGraph) {\n        var initialNodesState = (0, _graph3.initializeNodes)(_this.props.data.nodes);\n        for (var nodeId in _this.state.nodes) {\n          var node = _this.state.nodes[nodeId];\n          if (node.fx && node.fy) {\n            Reflect.deleteProperty(node, \"fx\");\n            Reflect.deleteProperty(node, \"fy\");\n          }\n          if (nodeId in initialNodesState) {\n            var initialNode = initialNodesState[nodeId];\n            node.x = initialNode.x;\n            node.y = initialNode.y;\n          }\n        }\n        _this.state.simulation.alphaTarget(_this.state.config.d3.alphaTarget).restart();\n        _this._tick();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"restartSimulation\", function () {\n      return !_this.state.config.staticGraph && _this.state.simulation.restart();\n    });\n    if (!_this.props.id) {\n      (0, _utils.throwErr)(_this.constructor.name, _err[\"default\"].GRAPH_NO_ID_PROP);\n    }\n    _this.focusAnimationTimeout = null;\n    _this.nodeClickTimer = null;\n    _this.isDraggingNode = false;\n    _this.state = (0, _graph3.initializeGraphState)(_this.props, _this.state);\n    _this.debouncedOnZoomChange = _this.props.onZoomChange ? (0, _utils.debounce)(_this.props.onZoomChange, 100) : null;\n    return _this;\n  }\n  /**\n   * @deprecated\n   * `componentWillReceiveProps` has a replacement method in react v16.3 onwards.\n   * that is getDerivedStateFromProps.\n   * But one needs to be aware that if an anti pattern of `componentWillReceiveProps` is\n   * in place for this implementation the migration might not be that easy.\n   * See {@link https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html}.\n   * @param {Object} nextProps - props.\n   * @returns {undefined}\n   */\n  // eslint-disable-next-line\n\n  _createClass(Graph, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _checkForGraphElement = (0, _graph3.checkForGraphElementsChanges)(nextProps, this.state),\n        graphElementsUpdated = _checkForGraphElement.graphElementsUpdated,\n        newGraphElements = _checkForGraphElement.newGraphElements;\n      var state = graphElementsUpdated ? (0, _graph3.initializeGraphState)(nextProps, this.state) : this.state;\n      var newConfig = nextProps.config || {};\n      var _checkForGraphConfigC = (0, _graph3.checkForGraphConfigChanges)(nextProps, this.state),\n        configUpdated = _checkForGraphConfigC.configUpdated,\n        d3ConfigUpdated = _checkForGraphConfigC.d3ConfigUpdated;\n      var config = configUpdated ? (0, _utils.merge)(_graph2[\"default\"], newConfig) : this.state.config; // in order to properly update graph data we need to pause eventual d3 ongoing animations\n\n      newGraphElements && this.pauseSimulation();\n      var transform = newConfig.panAndZoom !== this.state.config.panAndZoom ? 1 : this.state.transform;\n      var focusedNodeId = nextProps.data.focusedNodeId;\n      var d3FocusedNode = this.state.d3Nodes.find(function (node) {\n        return \"\".concat(node.id) === \"\".concat(focusedNodeId);\n      });\n      var containerElId = \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID);\n      var focusTransformation = (0, _graph3.getCenterAndZoomTransformation)(d3FocusedNode, this.state.config, containerElId) || this.state.focusTransformation;\n      var enableFocusAnimation = this.props.data.focusedNodeId !== nextProps.data.focusedNodeId; // if we're given a function to call when the zoom changes, we create a debounced version of it\n      // this is because this function gets called in very rapid succession when zooming\n\n      if (nextProps.onZoomChange) {\n        this.debouncedOnZoomChange = (0, _utils.debounce)(nextProps.onZoomChange, 100);\n      }\n      this.setState(_objectSpread({}, state, {\n        config: config,\n        configUpdated: configUpdated,\n        d3ConfigUpdated: d3ConfigUpdated,\n        newGraphElements: newGraphElements,\n        transform: transform,\n        focusedNodeId: focusedNodeId,\n        enableFocusAnimation: enableFocusAnimation,\n        focusTransformation: focusTransformation\n      }));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // if the property staticGraph was activated we want to stop possible ongoing simulation\n      var shouldPause = this.state.config.staticGraph || this.state.config.staticGraphWithDragAndDrop;\n      if (shouldPause) {\n        this.pauseSimulation();\n      }\n      if (!this.state.config.staticGraph && (this.state.newGraphElements || this.state.d3ConfigUpdated)) {\n        this._graphBindD3ToReactComponent();\n        if (!this.state.config.staticGraphWithDragAndDrop) {\n          this.restartSimulation();\n        }\n        this.setState({\n          newGraphElements: false,\n          d3ConfigUpdated: false\n        });\n      } else if (this.state.configUpdated) {\n        this._graphNodeDragConfig();\n      }\n      if (this.state.configUpdated) {\n        this._zoomConfig();\n        this.setState({\n          configUpdated: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.state.config.staticGraph) {\n        this._graphBindD3ToReactComponent();\n      } // graph zoom and drag&drop all network\n\n      this._zoomConfig();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.pauseSimulation();\n      if (this.nodeClickTimer) {\n        clearTimeout(this.nodeClickTimer);\n        this.nodeClickTimer = null;\n      }\n      if (this.focusAnimationTimeout) {\n        clearTimeout(this.focusAnimationTimeout);\n        this.focusAnimationTimeout = null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _renderGraph = (0, _graph4.renderGraph)(this.state.nodes, {\n          onClickNode: this.onClickNode,\n          onDoubleClickNode: this.onDoubleClickNode,\n          onRightClickNode: this.onRightClickNode,\n          onMouseOverNode: this.onMouseOverNode,\n          onMouseOut: this.onMouseOutNode\n        }, this.state.d3Links, this.state.links, {\n          onClickLink: this.props.onClickLink,\n          onRightClickLink: this.props.onRightClickLink,\n          onMouseOverLink: this.onMouseOverLink,\n          onMouseOutLink: this.onMouseOutLink\n        }, this.state.config, this.state.highlightedNode, this.state.highlightedLink, this.state.transform),\n        nodes = _renderGraph.nodes,\n        links = _renderGraph.links,\n        defs = _renderGraph.defs;\n      var svgStyle = {\n        height: this.state.config.height,\n        width: this.state.config.width\n      };\n      var containerProps = this._generateFocusAnimationProps();\n      return _react[\"default\"].createElement(\"div\", {\n        id: \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID)\n      }, _react[\"default\"].createElement(\"svg\", {\n        name: \"svg-container-\".concat(this.state.id),\n        style: svgStyle,\n        onClick: this.onClickGraph\n      }, defs, _react[\"default\"].createElement(\"g\", _extends({\n        id: \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_CONTAINER_ID)\n      }, containerProps), links, nodes)));\n    }\n  }]);\n  return Graph;\n}(_react[\"default\"].Component);\nexports[\"default\"] = Graph;","map":{"version":3,"names":["Object","defineProperty","exports","value","_react","_interopRequireDefault","require","_d3Drag","_d3Force","_d3Selection","_d3Zoom","_graph","_graph2","_err","_collapse","_graph3","_graph4","_utils","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","p","Graph","_React$Component","_graphLinkForceConfig","forceLink","state","d3Links","id","l","distance","config","d3","linkLength","strength","linkStrength","simulation","force","LINK_CLASS_NAME","_graphNodeDragConfig","customNodeDrag","drag","on","_onDragStart","_onDragMove","_onDragEnd","select","concat","GRAPH_WRAPPER_ID","selectAll","_graphBindD3ToReactComponent","disableLinkForce","nodes","d3Nodes","_tick","freezeAllDragEvents","_this","enableFocusAnimation","focusAnimationTimeout","clearTimeout","setTimeout","setState","focusAnimationDuration","transitionDuration","style","transform","focusTransformation","isDraggingNode","draggedNode","onNodePositionChange","staticGraph","automaticRearrangeAfterDropNode","alphaTarget","restart","ev","index","nodeList","oldX","x","oldY","y","event","dx","dy","pauseSimulation","undefined","updateNodeHighlightedValue","links","cb","selector","zoomObject","zoom","scaleExtent","minZoom","maxZoom","_zoomed","initialZoom","scaleTo","GRAPH_CONTAINER_ID","attr","panAndZoom","k","debouncedOnZoomChange","previousZoom","e","_e$target","_e$target$attributes","_e$target$attributes$","tagName","name","attributes","svgContainerName","toUpperCase","onClickGraph","clickedNodeId","clickedNode","collapsible","leafConnections","getTargetLeafConnections","toggleLinksMatrixConnections","toggleLinksConnections","firstLeaf","isExpanding","visibility","onClickNode","nodeClickTimer","TTL_DOUBLE_CLICK_IN_MS","onDoubleClickNode","onRightClickNode","onMouseOverNode","nodeHighlightBehavior","_setNodeHighlightedValue","onMouseOutNode","onMouseOverLink","linkHighlightBehavior","highlightedLink","onMouseOutLink","node","stop","initialNodesState","initializeNodes","data","nodeId","fx","fy","Reflect","deleteProperty","initialNode","throwErr","GRAPH_NO_ID_PROP","initializeGraphState","onZoomChange","debounce","UNSAFE_componentWillReceiveProps","nextProps","_checkForGraphElement","checkForGraphElementsChanges","graphElementsUpdated","newGraphElements","newConfig","_checkForGraphConfigC","checkForGraphConfigChanges","configUpdated","d3ConfigUpdated","merge","focusedNodeId","d3FocusedNode","find","containerElId","getCenterAndZoomTransformation","componentDidUpdate","shouldPause","staticGraphWithDragAndDrop","restartSimulation","_zoomConfig","componentDidMount","componentWillUnmount","render","_renderGraph","renderGraph","onMouseOut","onClickLink","onRightClickLink","highlightedNode","defs","svgStyle","height","width","containerProps","_generateFocusAnimationProps","createElement","onClick","Component"],"sources":["C:/Users/barun/OneDrive/Documents/btp/chatbot/client/node_modules/react-d3-graph/lib/components/graph/Graph.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _d3Drag = require(\"d3-drag\");\n\nvar _d3Force = require(\"d3-force\");\n\nvar _d3Selection = require(\"d3-selection\");\n\nvar _d3Zoom = require(\"d3-zoom\");\n\nvar _graph = _interopRequireDefault(require(\"./graph.const\"));\n\nvar _graph2 = _interopRequireDefault(require(\"./graph.config\"));\n\nvar _err = _interopRequireDefault(require(\"../../err\"));\n\nvar _collapse = require(\"./collapse.helper\");\n\nvar _graph3 = require(\"./graph.helper\");\n\nvar _graph4 = require(\"./graph.renderer\");\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Graph component is the main component for react-d3-graph components, its interface allows its user\n * to build the graph once the user provides the data, configuration (optional) and callback interactions (also optional).\n * The code for the [live example](https://danielcaldas.github.io/react-d3-graph/sandbox/index.html)\n * can be consulted [here](https://github.com/danielcaldas/react-d3-graph/blob/master/sandbox/Sandbox.jsx)\n * @example\n * import { Graph } from 'react-d3-graph';\n *\n * // graph payload (with minimalist structure)\n * const data = {\n *     nodes: [\n *       {id: 'Harry'},\n *       {id: 'Sally'},\n *       {id: 'Alice'}\n *     ],\n *     links: [\n *         {source: 'Harry', target: 'Sally'},\n *         {source: 'Harry', target: 'Alice'},\n *     ]\n * };\n *\n * // the graph configuration, you only need to pass down properties\n * // that you want to override, otherwise default ones will be used\n * const myConfig = {\n *     nodeHighlightBehavior: true,\n *     node: {\n *         color: 'lightgreen',\n *         size: 120,\n *         highlightStrokeColor: 'blue'\n *     },\n *     link: {\n *         highlightColor: 'lightblue'\n *     }\n * };\n *\n * // Callback to handle click on the graph.\n * // @param {Object} event click dom event\n * const onClickGraph = function(event) {\n *      window.alert('Clicked the graph background');\n * };\n *\n * const onClickNode = function(nodeId, node) {\n *      window.alert('Clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onDoubleClickNode = function(nodeId, node) {\n *      window.alert('Double clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onRightClickNode = function(event, nodeId, node) {\n *      window.alert('Right clicked node ${nodeId} in position (${node.x}, ${node.y})');\n * };\n *\n * const onMouseOverNode = function(nodeId, node) {\n *      window.alert(`Mouse over node ${nodeId} in position (${node.x}, ${node.y})`);\n * };\n *\n * const onMouseOutNode = function(nodeId, node) {\n *      window.alert(`Mouse out node ${nodeId} in position (${node.x}, ${node.y})`);\n * };\n *\n * const onClickLink = function(source, target) {\n *      window.alert(`Clicked link between ${source} and ${target}`);\n * };\n *\n * const onRightClickLink = function(event, source, target) {\n *      window.alert('Right clicked link between ${source} and ${target}');\n * };\n *\n * const onMouseOverLink = function(source, target) {\n *      window.alert(`Mouse over in link between ${source} and ${target}`);\n * };\n *\n * const onMouseOutLink = function(source, target) {\n *      window.alert(`Mouse out link between ${source} and ${target}`);\n * };\n *\n * const onNodePositionChange = function(nodeId, x, y) {\n *      window.alert(`Node ${nodeId} moved to new position x= ${x} y= ${y}`);\n * };\n *\n * // Callback that's called whenever the graph is zoomed in/out\n * // @param {number} previousZoom the previous graph zoom\n * // @param {number} newZoom the new graph zoom\n * const onZoomChange = function(previousZoom, newZoom) {\n *      window.alert(`Graph is now zoomed at ${newZoom} from ${previousZoom}`);\n * };\n *\n *\n * <Graph\n *      id='graph-id' // id is mandatory, if no id is defined rd3g will throw an error\n *      data={data}\n *      config={myConfig}\n *      onClickGraph={onClickGraph}\n *      onClickNode={onClickNode}\n *      onDoubleClickNode={onDoubleClickNode}\n *      onRightClickNode={onRightClickNode}\n *      onClickLink={onClickLink}\n *      onRightClickLink={onRightClickLink}\n *      onMouseOverNode={onMouseOverNode}\n *      onMouseOutNode={onMouseOutNode}\n *      onMouseOverLink={onMouseOverLink}\n *      onMouseOutLink={onMouseOutLink}\n *      onNodePositionChange={onNodePositionChange}\n *      onZoomChange={onZoomChange}/>\n */\nvar Graph = /*#__PURE__*/function (_React$Component) {\n  _inherits(Graph, _React$Component);\n\n  _createClass(Graph, [{\n    key: \"_graphLinkForceConfig\",\n\n    /**\n     * Obtain a set of properties which will be used to perform the focus and zoom animation if\n     * required. In case there's not a focus and zoom animation in progress, it should reset the\n     * transition duration to zero and clear transformation styles.\n     * @returns {Object} - Focus and zoom animation properties.\n     */\n\n    /**\n     * This method runs {@link d3-force|https://github.com/d3/d3-force}\n     * against the current graph.\n     * @returns {undefined}\n     */\n    value: function _graphLinkForceConfig() {\n      var forceLink = (0, _d3Force.forceLink)(this.state.d3Links).id(function (l) {\n        return l.id;\n      }).distance(this.state.config.d3.linkLength).strength(this.state.config.d3.linkStrength);\n      this.state.simulation.force(_graph[\"default\"].LINK_CLASS_NAME, forceLink);\n    }\n    /**\n     * This method runs {@link d3-drag|https://github.com/d3/d3-drag}\n     * against the current graph.\n     * @returns {undefined}\n     */\n\n  }, {\n    key: \"_graphNodeDragConfig\",\n    value: function _graphNodeDragConfig() {\n      var customNodeDrag = (0, _d3Drag.drag)().on(\"start\", this._onDragStart).on(\"drag\", this._onDragMove).on(\"end\", this._onDragEnd);\n      (0, _d3Selection.select)(\"#\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID)).selectAll(\".node\").call(customNodeDrag);\n    }\n    /**\n     * Sets d3 tick function and configures other d3 stuff such as forces and drag events.\n     * Whenever called binds Graph component state with d3.\n     * @returns {undefined}\n     */\n\n  }, {\n    key: \"_graphBindD3ToReactComponent\",\n    value: function _graphBindD3ToReactComponent() {\n      if (!this.state.config.d3.disableLinkForce) {\n        this.state.simulation.nodes(this.state.d3Nodes).on(\"tick\", this._tick);\n\n        this._graphLinkForceConfig();\n      }\n\n      if (!this.state.config.freezeAllDragEvents) {\n        this._graphNodeDragConfig();\n      }\n    }\n    /**\n     * Handles d3 drag 'end' event.\n     * @returns {undefined}\n     */\n\n  }]);\n\n  function Graph(props) {\n    var _this;\n\n    _classCallCheck(this, Graph);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Graph).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_generateFocusAnimationProps\", function () {\n      // In case an older animation was still not complete, clear previous timeout to ensure the new one is not cancelled\n      if (_this.state.enableFocusAnimation) {\n        if (_this.focusAnimationTimeout) {\n          clearTimeout(_this.focusAnimationTimeout);\n        }\n\n        _this.focusAnimationTimeout = setTimeout(function () {\n          return _this.setState({\n            enableFocusAnimation: false\n          });\n        }, _this.state.config.focusAnimationDuration * 1000);\n      }\n\n      var transitionDuration = _this.state.enableFocusAnimation ? _this.state.config.focusAnimationDuration : 0;\n      return {\n        style: {\n          transitionDuration: \"\".concat(transitionDuration, \"s\")\n        },\n        transform: _this.state.focusTransformation\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragEnd\", function () {\n      _this.isDraggingNode = false;\n\n      if (_this.state.draggedNode) {\n        _this.onNodePositionChange(_this.state.draggedNode);\n\n        _this._tick({\n          draggedNode: null\n        });\n      }\n\n      !_this.state.config.staticGraph && _this.state.config.automaticRearrangeAfterDropNode && _this.state.simulation.alphaTarget(_this.state.config.d3.alphaTarget).restart();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragMove\", function (ev, index, nodeList) {\n      var id = nodeList[index].id;\n\n      if (!_this.state.config.staticGraph) {\n        // this is where d3 and react bind\n        var draggedNode = _this.state.nodes[id];\n        draggedNode.oldX = draggedNode.x;\n        draggedNode.oldY = draggedNode.y;\n        draggedNode.x += _d3Selection.event.dx;\n        draggedNode.y += _d3Selection.event.dy; // set nodes fixing coords fx and fy\n\n        draggedNode[\"fx\"] = draggedNode.x;\n        draggedNode[\"fy\"] = draggedNode.y;\n\n        _this._tick({\n          draggedNode: draggedNode\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragStart\", function () {\n      _this.isDraggingNode = true;\n\n      _this.pauseSimulation();\n\n      if (_this.state.enableFocusAnimation) {\n        _this.setState({\n          enableFocusAnimation: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_setNodeHighlightedValue\", function (id) {\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return _this._tick((0, _graph3.updateNodeHighlightedValue)(_this.state.nodes, _this.state.links, _this.state.config, id, value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_tick\", function () {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var cb = arguments.length > 1 ? arguments[1] : undefined;\n      return cb ? _this.setState(state, cb) : _this.setState(state);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomConfig\", function () {\n      var selector = (0, _d3Selection.select)(\"#\".concat(_this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID));\n      var zoomObject = (0, _d3Zoom.zoom)().scaleExtent([_this.state.config.minZoom, _this.state.config.maxZoom]);\n\n      if (!_this.state.config.freezeAllDragEvents) {\n        zoomObject.on(\"zoom\", _this._zoomed);\n      }\n\n      if (_this.state.config.initialZoom !== null) {\n        zoomObject.scaleTo(selector, _this.state.config.initialZoom);\n      } // avoid double click on graph to trigger zoom\n      // for more details consult: https://github.com/danielcaldas/react-d3-graph/pull/202\n\n\n      selector.call(zoomObject).on(\"dblclick.zoom\", null);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomed\", function () {\n      var transform = _d3Selection.event.transform;\n      (0, _d3Selection.selectAll)(\"#\".concat(_this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_CONTAINER_ID)).attr(\"transform\", transform);\n      _this.state.config.panAndZoom && _this.setState({\n        transform: transform.k\n      }); // only send zoom change events if the zoom has changed (_zoomed() also gets called when panning)\n\n      if (_this.debouncedOnZoomChange && _this.state.previousZoom !== transform.k) {\n        _this.debouncedOnZoomChange(_this.state.previousZoom, transform.k);\n\n        _this.setState({\n          previousZoom: transform.k\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickGraph\", function (e) {\n      var _e$target, _e$target$attributes, _e$target$attributes$;\n\n      if (_this.state.enableFocusAnimation) {\n        _this.setState({\n          enableFocusAnimation: false\n        });\n      } // Only trigger the graph onClickHandler, if not clicked a node or link.\n      // toUpperCase() is added as a precaution, as the documentation says tagName should always\n      // return in UPPERCASE, but chrome returns lowercase\n\n\n      var tagName = e.target && e.target.tagName;\n      var name = e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : (_e$target$attributes = _e$target.attributes) === null || _e$target$attributes === void 0 ? void 0 : (_e$target$attributes$ = _e$target$attributes.name) === null || _e$target$attributes$ === void 0 ? void 0 : _e$target$attributes$.value;\n      var svgContainerName = \"svg-container-\".concat(_this.state.id);\n\n      if (tagName.toUpperCase() === \"SVG\" && name === svgContainerName) {\n        _this.props.onClickGraph && _this.props.onClickGraph(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickNode\", function (clickedNodeId) {\n      var clickedNode = _this.state.nodes[clickedNodeId];\n\n      if (_this.state.config.collapsible) {\n        var leafConnections = (0, _collapse.getTargetLeafConnections)(clickedNodeId, _this.state.links, _this.state.config);\n        var links = (0, _collapse.toggleLinksMatrixConnections)(_this.state.links, leafConnections, _this.state.config);\n        var d3Links = (0, _collapse.toggleLinksConnections)(_this.state.d3Links, links);\n        var firstLeaf = leafConnections === null || leafConnections === void 0 ? void 0 : leafConnections[\"0\"];\n        var isExpanding = false;\n\n        if (firstLeaf) {\n          var visibility = links[firstLeaf.source][firstLeaf.target];\n          isExpanding = visibility === 1;\n        }\n\n        _this._tick({\n          links: links,\n          d3Links: d3Links\n        }, function () {\n          _this.props.onClickNode && _this.props.onClickNode(clickedNodeId, clickedNode);\n\n          if (isExpanding) {\n            _this._graphNodeDragConfig();\n          }\n        });\n      } else {\n        if (!_this.nodeClickTimer) {\n          _this.nodeClickTimer = setTimeout(function () {\n            _this.props.onClickNode && _this.props.onClickNode(clickedNodeId, clickedNode);\n            _this.nodeClickTimer = null;\n          }, _graph[\"default\"].TTL_DOUBLE_CLICK_IN_MS);\n        } else {\n          _this.props.onDoubleClickNode && _this.props.onDoubleClickNode(clickedNodeId, clickedNode);\n          _this.nodeClickTimer = clearTimeout(_this.nodeClickTimer);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRightClickNode\", function (event, id) {\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onRightClickNode && _this.props.onRightClickNode(event, id, clickedNode);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOverNode\", function (id) {\n      if (_this.isDraggingNode) {\n        return;\n      }\n\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onMouseOverNode && _this.props.onMouseOverNode(id, clickedNode);\n      _this.state.config.nodeHighlightBehavior && _this._setNodeHighlightedValue(id, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOutNode\", function (id) {\n      if (_this.isDraggingNode) {\n        return;\n      }\n\n      var clickedNode = _this.state.nodes[id];\n      _this.props.onMouseOutNode && _this.props.onMouseOutNode(id, clickedNode);\n      _this.state.config.nodeHighlightBehavior && _this._setNodeHighlightedValue(id, false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOverLink\", function (source, target) {\n      _this.props.onMouseOverLink && _this.props.onMouseOverLink(source, target);\n\n      if (_this.state.config.linkHighlightBehavior) {\n        var highlightedLink = {\n          source: source,\n          target: target\n        };\n\n        _this._tick({\n          highlightedLink: highlightedLink\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseOutLink\", function (source, target) {\n      _this.props.onMouseOutLink && _this.props.onMouseOutLink(source, target);\n\n      if (_this.state.config.linkHighlightBehavior) {\n        var highlightedLink = undefined;\n\n        _this._tick({\n          highlightedLink: highlightedLink\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onNodePositionChange\", function (node) {\n      if (!_this.props.onNodePositionChange) {\n        return;\n      }\n\n      var id = node.id,\n          x = node.x,\n          y = node.y;\n\n      _this.props.onNodePositionChange(id, x, y);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pauseSimulation\", function () {\n      return _this.state.simulation.stop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetNodesPositions\", function () {\n      if (!_this.state.config.staticGraph) {\n        var initialNodesState = (0, _graph3.initializeNodes)(_this.props.data.nodes);\n\n        for (var nodeId in _this.state.nodes) {\n          var node = _this.state.nodes[nodeId];\n\n          if (node.fx && node.fy) {\n            Reflect.deleteProperty(node, \"fx\");\n            Reflect.deleteProperty(node, \"fy\");\n          }\n\n          if (nodeId in initialNodesState) {\n            var initialNode = initialNodesState[nodeId];\n            node.x = initialNode.x;\n            node.y = initialNode.y;\n          }\n        }\n\n        _this.state.simulation.alphaTarget(_this.state.config.d3.alphaTarget).restart();\n\n        _this._tick();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"restartSimulation\", function () {\n      return !_this.state.config.staticGraph && _this.state.simulation.restart();\n    });\n\n    if (!_this.props.id) {\n      (0, _utils.throwErr)(_this.constructor.name, _err[\"default\"].GRAPH_NO_ID_PROP);\n    }\n\n    _this.focusAnimationTimeout = null;\n    _this.nodeClickTimer = null;\n    _this.isDraggingNode = false;\n    _this.state = (0, _graph3.initializeGraphState)(_this.props, _this.state);\n    _this.debouncedOnZoomChange = _this.props.onZoomChange ? (0, _utils.debounce)(_this.props.onZoomChange, 100) : null;\n    return _this;\n  }\n  /**\n   * @deprecated\n   * `componentWillReceiveProps` has a replacement method in react v16.3 onwards.\n   * that is getDerivedStateFromProps.\n   * But one needs to be aware that if an anti pattern of `componentWillReceiveProps` is\n   * in place for this implementation the migration might not be that easy.\n   * See {@link https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html}.\n   * @param {Object} nextProps - props.\n   * @returns {undefined}\n   */\n  // eslint-disable-next-line\n\n\n  _createClass(Graph, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _checkForGraphElement = (0, _graph3.checkForGraphElementsChanges)(nextProps, this.state),\n          graphElementsUpdated = _checkForGraphElement.graphElementsUpdated,\n          newGraphElements = _checkForGraphElement.newGraphElements;\n\n      var state = graphElementsUpdated ? (0, _graph3.initializeGraphState)(nextProps, this.state) : this.state;\n      var newConfig = nextProps.config || {};\n\n      var _checkForGraphConfigC = (0, _graph3.checkForGraphConfigChanges)(nextProps, this.state),\n          configUpdated = _checkForGraphConfigC.configUpdated,\n          d3ConfigUpdated = _checkForGraphConfigC.d3ConfigUpdated;\n\n      var config = configUpdated ? (0, _utils.merge)(_graph2[\"default\"], newConfig) : this.state.config; // in order to properly update graph data we need to pause eventual d3 ongoing animations\n\n      newGraphElements && this.pauseSimulation();\n      var transform = newConfig.panAndZoom !== this.state.config.panAndZoom ? 1 : this.state.transform;\n      var focusedNodeId = nextProps.data.focusedNodeId;\n      var d3FocusedNode = this.state.d3Nodes.find(function (node) {\n        return \"\".concat(node.id) === \"\".concat(focusedNodeId);\n      });\n      var containerElId = \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID);\n      var focusTransformation = (0, _graph3.getCenterAndZoomTransformation)(d3FocusedNode, this.state.config, containerElId) || this.state.focusTransformation;\n      var enableFocusAnimation = this.props.data.focusedNodeId !== nextProps.data.focusedNodeId; // if we're given a function to call when the zoom changes, we create a debounced version of it\n      // this is because this function gets called in very rapid succession when zooming\n\n      if (nextProps.onZoomChange) {\n        this.debouncedOnZoomChange = (0, _utils.debounce)(nextProps.onZoomChange, 100);\n      }\n\n      this.setState(_objectSpread({}, state, {\n        config: config,\n        configUpdated: configUpdated,\n        d3ConfigUpdated: d3ConfigUpdated,\n        newGraphElements: newGraphElements,\n        transform: transform,\n        focusedNodeId: focusedNodeId,\n        enableFocusAnimation: enableFocusAnimation,\n        focusTransformation: focusTransformation\n      }));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // if the property staticGraph was activated we want to stop possible ongoing simulation\n      var shouldPause = this.state.config.staticGraph || this.state.config.staticGraphWithDragAndDrop;\n\n      if (shouldPause) {\n        this.pauseSimulation();\n      }\n\n      if (!this.state.config.staticGraph && (this.state.newGraphElements || this.state.d3ConfigUpdated)) {\n        this._graphBindD3ToReactComponent();\n\n        if (!this.state.config.staticGraphWithDragAndDrop) {\n          this.restartSimulation();\n        }\n\n        this.setState({\n          newGraphElements: false,\n          d3ConfigUpdated: false\n        });\n      } else if (this.state.configUpdated) {\n        this._graphNodeDragConfig();\n      }\n\n      if (this.state.configUpdated) {\n        this._zoomConfig();\n\n        this.setState({\n          configUpdated: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.state.config.staticGraph) {\n        this._graphBindD3ToReactComponent();\n      } // graph zoom and drag&drop all network\n\n\n      this._zoomConfig();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.pauseSimulation();\n\n      if (this.nodeClickTimer) {\n        clearTimeout(this.nodeClickTimer);\n        this.nodeClickTimer = null;\n      }\n\n      if (this.focusAnimationTimeout) {\n        clearTimeout(this.focusAnimationTimeout);\n        this.focusAnimationTimeout = null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _renderGraph = (0, _graph4.renderGraph)(this.state.nodes, {\n        onClickNode: this.onClickNode,\n        onDoubleClickNode: this.onDoubleClickNode,\n        onRightClickNode: this.onRightClickNode,\n        onMouseOverNode: this.onMouseOverNode,\n        onMouseOut: this.onMouseOutNode\n      }, this.state.d3Links, this.state.links, {\n        onClickLink: this.props.onClickLink,\n        onRightClickLink: this.props.onRightClickLink,\n        onMouseOverLink: this.onMouseOverLink,\n        onMouseOutLink: this.onMouseOutLink\n      }, this.state.config, this.state.highlightedNode, this.state.highlightedLink, this.state.transform),\n          nodes = _renderGraph.nodes,\n          links = _renderGraph.links,\n          defs = _renderGraph.defs;\n\n      var svgStyle = {\n        height: this.state.config.height,\n        width: this.state.config.width\n      };\n\n      var containerProps = this._generateFocusAnimationProps();\n\n      return _react[\"default\"].createElement(\"div\", {\n        id: \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_WRAPPER_ID)\n      }, _react[\"default\"].createElement(\"svg\", {\n        name: \"svg-container-\".concat(this.state.id),\n        style: svgStyle,\n        onClick: this.onClickGraph\n      }, defs, _react[\"default\"].createElement(\"g\", _extends({\n        id: \"\".concat(this.state.id, \"-\").concat(_graph[\"default\"].GRAPH_CONTAINER_ID)\n      }, containerProps), links, nodes)));\n    }\n  }]);\n\n  return Graph;\n}(_react[\"default\"].Component);\n\nexports[\"default\"] = Graph;"],"mappings":"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AAe,CAACjB,CAAC,EAAEkB,CAAC,EAAE;IAAElB,CAAC,CAACG,SAAS,GAAGe,CAAC;IAAE,OAAOlB,CAAC;EAAE,CAAC;EAAE,OAAOiB,eAAe,CAACjB,CAAC,EAAEkB,CAAC,CAAC;AAAE;AAEzK,SAAS7B,eAAe,CAAC/B,GAAG,EAAEc,GAAG,EAAE7B,KAAK,EAAE;EAAE,IAAI6B,GAAG,IAAId,GAAG,EAAE;IAAElB,MAAM,CAACC,cAAc,CAACiB,GAAG,EAAEc,GAAG,EAAE;MAAE7B,KAAK,EAAEA,KAAK;MAAE0C,UAAU,EAAE,IAAI;MAAEuB,YAAY,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;EAAE,CAAC,MAAM;IAAEnD,GAAG,CAACc,GAAG,CAAC,GAAG7B,KAAK;EAAE;EAAE,OAAOe,GAAG;AAAE;;AAEhN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI6D,KAAK,GAAG,aAAa,UAAUC,gBAAgB,EAAE;EACnDP,SAAS,CAACM,KAAK,EAAEC,gBAAgB,CAAC;EAElCV,YAAY,CAACS,KAAK,EAAE,CAAC;IACnB/C,GAAG,EAAE,uBAAuB;IAE5B;AACJ;AACA;AACA;AACA;AACA;;IAEI;AACJ;AACA;AACA;AACA;IACI7B,KAAK,EAAE,SAAS8E,qBAAqB,GAAG;MACtC,IAAIC,SAAS,GAAG,CAAC,CAAC,EAAE1E,QAAQ,CAAC0E,SAAS,EAAE,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC,CAACC,EAAE,CAAC,UAAUC,CAAC,EAAE;QAC1E,OAAOA,CAAC,CAACD,EAAE;MACb,CAAC,CAAC,CAACE,QAAQ,CAAC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,EAAE,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACR,KAAK,CAACK,MAAM,CAACC,EAAE,CAACG,YAAY,CAAC;MACxF,IAAI,CAACT,KAAK,CAACU,UAAU,CAACC,KAAK,CAACnF,MAAM,CAAC,SAAS,CAAC,CAACoF,eAAe,EAAEb,SAAS,CAAC;IAC3E;IACA;AACJ;AACA;AACA;AACA;EAEE,CAAC,EAAE;IACDlD,GAAG,EAAE,sBAAsB;IAC3B7B,KAAK,EAAE,SAAS6F,oBAAoB,GAAG;MACrC,IAAIC,cAAc,GAAG,CAAC,CAAC,EAAE1F,OAAO,CAAC2F,IAAI,GAAG,CAACC,EAAE,CAAC,OAAO,EAAE,IAAI,CAACC,YAAY,CAAC,CAACD,EAAE,CAAC,MAAM,EAAE,IAAI,CAACE,WAAW,CAAC,CAACF,EAAE,CAAC,KAAK,EAAE,IAAI,CAACG,UAAU,CAAC;MAC/H,CAAC,CAAC,EAAE7F,YAAY,CAAC8F,MAAM,EAAE,GAAG,CAACC,MAAM,CAAC,IAAI,CAACrB,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAAC8F,gBAAgB,CAAC,CAAC,CAACC,SAAS,CAAC,OAAO,CAAC,CAACxE,IAAI,CAAC+D,cAAc,CAAC;IAC7I;IACA;AACJ;AACA;AACA;AACA;EAEE,CAAC,EAAE;IACDjE,GAAG,EAAE,8BAA8B;IACnC7B,KAAK,EAAE,SAASwG,4BAA4B,GAAG;MAC7C,IAAI,CAAC,IAAI,CAACxB,KAAK,CAACK,MAAM,CAACC,EAAE,CAACmB,gBAAgB,EAAE;QAC1C,IAAI,CAACzB,KAAK,CAACU,UAAU,CAACgB,KAAK,CAAC,IAAI,CAAC1B,KAAK,CAAC2B,OAAO,CAAC,CAACX,EAAE,CAAC,MAAM,EAAE,IAAI,CAACY,KAAK,CAAC;QAEtE,IAAI,CAAC9B,qBAAqB,EAAE;MAC9B;MAEA,IAAI,CAAC,IAAI,CAACE,KAAK,CAACK,MAAM,CAACwB,mBAAmB,EAAE;QAC1C,IAAI,CAAChB,oBAAoB,EAAE;MAC7B;IACF;IACA;AACJ;AACA;AACA;EAEE,CAAC,CAAC,CAAC;;EAEH,SAASjB,KAAK,CAACb,KAAK,EAAE;IACpB,IAAI+C,KAAK;IAET7D,eAAe,CAAC,IAAI,EAAE2B,KAAK,CAAC;IAE5BkC,KAAK,GAAGzD,0BAA0B,CAAC,IAAI,EAAEG,eAAe,CAACoB,KAAK,CAAC,CAAC7C,IAAI,CAAC,IAAI,EAAEgC,KAAK,CAAC,CAAC;IAElFjB,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,8BAA8B,EAAE,YAAY;MACzF;MACA,IAAIA,KAAK,CAAC9B,KAAK,CAAC+B,oBAAoB,EAAE;QACpC,IAAID,KAAK,CAACE,qBAAqB,EAAE;UAC/BC,YAAY,CAACH,KAAK,CAACE,qBAAqB,CAAC;QAC3C;QAEAF,KAAK,CAACE,qBAAqB,GAAGE,UAAU,CAAC,YAAY;UACnD,OAAOJ,KAAK,CAACK,QAAQ,CAAC;YACpBJ,oBAAoB,EAAE;UACxB,CAAC,CAAC;QACJ,CAAC,EAAED,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC+B,sBAAsB,GAAG,IAAI,CAAC;MACtD;MAEA,IAAIC,kBAAkB,GAAGP,KAAK,CAAC9B,KAAK,CAAC+B,oBAAoB,GAAGD,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC+B,sBAAsB,GAAG,CAAC;MACzG,OAAO;QACLE,KAAK,EAAE;UACLD,kBAAkB,EAAE,EAAE,CAAChB,MAAM,CAACgB,kBAAkB,EAAE,GAAG;QACvD,CAAC;QACDE,SAAS,EAAET,KAAK,CAAC9B,KAAK,CAACwC;MACzB,CAAC;IACH,CAAC,CAAC;IAEF1E,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,YAAY,EAAE,YAAY;MACvEA,KAAK,CAACW,cAAc,GAAG,KAAK;MAE5B,IAAIX,KAAK,CAAC9B,KAAK,CAAC0C,WAAW,EAAE;QAC3BZ,KAAK,CAACa,oBAAoB,CAACb,KAAK,CAAC9B,KAAK,CAAC0C,WAAW,CAAC;QAEnDZ,KAAK,CAACF,KAAK,CAAC;UACVc,WAAW,EAAE;QACf,CAAC,CAAC;MACJ;MAEA,CAACZ,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuC,WAAW,IAAId,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACwC,+BAA+B,IAAIf,KAAK,CAAC9B,KAAK,CAACU,UAAU,CAACoC,WAAW,CAAChB,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACC,EAAE,CAACwC,WAAW,CAAC,CAACC,OAAO,EAAE;IAC1K,CAAC,CAAC;IAEFjF,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,aAAa,EAAE,UAAUkB,EAAE,EAAEC,KAAK,EAAEC,QAAQ,EAAE;MAC3F,IAAIhD,EAAE,GAAGgD,QAAQ,CAACD,KAAK,CAAC,CAAC/C,EAAE;MAE3B,IAAI,CAAC4B,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuC,WAAW,EAAE;QACnC;QACA,IAAIF,WAAW,GAAGZ,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAACxB,EAAE,CAAC;QACvCwC,WAAW,CAACS,IAAI,GAAGT,WAAW,CAACU,CAAC;QAChCV,WAAW,CAACW,IAAI,GAAGX,WAAW,CAACY,CAAC;QAChCZ,WAAW,CAACU,CAAC,IAAI9H,YAAY,CAACiI,KAAK,CAACC,EAAE;QACtCd,WAAW,CAACY,CAAC,IAAIhI,YAAY,CAACiI,KAAK,CAACE,EAAE,CAAC,CAAC;;QAExCf,WAAW,CAAC,IAAI,CAAC,GAAGA,WAAW,CAACU,CAAC;QACjCV,WAAW,CAAC,IAAI,CAAC,GAAGA,WAAW,CAACY,CAAC;QAEjCxB,KAAK,CAACF,KAAK,CAAC;UACVc,WAAW,EAAEA;QACf,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF5E,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,cAAc,EAAE,YAAY;MACzEA,KAAK,CAACW,cAAc,GAAG,IAAI;MAE3BX,KAAK,CAAC4B,eAAe,EAAE;MAEvB,IAAI5B,KAAK,CAAC9B,KAAK,CAAC+B,oBAAoB,EAAE;QACpCD,KAAK,CAACK,QAAQ,CAAC;UACbJ,oBAAoB,EAAE;QACxB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEFjE,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,0BAA0B,EAAE,UAAU5B,EAAE,EAAE;MACvF,IAAIlF,KAAK,GAAG0B,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKiH,SAAS,GAAGjH,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;MACrF,OAAOoF,KAAK,CAACF,KAAK,CAAC,CAAC,CAAC,EAAEhG,OAAO,CAACgI,0BAA0B,EAAE9B,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,EAAEI,KAAK,CAAC9B,KAAK,CAAC6D,KAAK,EAAE/B,KAAK,CAAC9B,KAAK,CAACK,MAAM,EAAEH,EAAE,EAAElF,KAAK,CAAC,CAAC;IAClI,CAAC,CAAC;IAEF8C,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,OAAO,EAAE,YAAY;MAClE,IAAI9B,KAAK,GAAGtD,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKiH,SAAS,GAAGjH,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;MAClF,IAAIoH,EAAE,GAAGpH,SAAS,CAACC,MAAM,GAAG,CAAC,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAGiH,SAAS;MACxD,OAAOG,EAAE,GAAGhC,KAAK,CAACK,QAAQ,CAACnC,KAAK,EAAE8D,EAAE,CAAC,GAAGhC,KAAK,CAACK,QAAQ,CAACnC,KAAK,CAAC;IAC/D,CAAC,CAAC;IAEFlC,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,aAAa,EAAE,YAAY;MACxE,IAAIiC,QAAQ,GAAG,CAAC,CAAC,EAAEzI,YAAY,CAAC8F,MAAM,EAAE,GAAG,CAACC,MAAM,CAACS,KAAK,CAAC9B,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAAC8F,gBAAgB,CAAC,CAAC;MACnH,IAAI0C,UAAU,GAAG,CAAC,CAAC,EAAEzI,OAAO,CAAC0I,IAAI,GAAG,CAACC,WAAW,CAAC,CAACpC,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC8D,OAAO,EAAErC,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC+D,OAAO,CAAC,CAAC;MAE1G,IAAI,CAACtC,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACwB,mBAAmB,EAAE;QAC3CmC,UAAU,CAAChD,EAAE,CAAC,MAAM,EAAEc,KAAK,CAACuC,OAAO,CAAC;MACtC;MAEA,IAAIvC,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACiE,WAAW,KAAK,IAAI,EAAE;QAC3CN,UAAU,CAACO,OAAO,CAACR,QAAQ,EAAEjC,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACiE,WAAW,CAAC;MAC9D,CAAC,CAAC;MACF;;MAGAP,QAAQ,CAAChH,IAAI,CAACiH,UAAU,CAAC,CAAChD,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC;IACrD,CAAC,CAAC;IAEFlD,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,SAAS,EAAE,YAAY;MACpE,IAAIS,SAAS,GAAGjH,YAAY,CAACiI,KAAK,CAAChB,SAAS;MAC5C,CAAC,CAAC,EAAEjH,YAAY,CAACiG,SAAS,EAAE,GAAG,CAACF,MAAM,CAACS,KAAK,CAAC9B,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAACgJ,kBAAkB,CAAC,CAAC,CAACC,IAAI,CAAC,WAAW,EAAElC,SAAS,CAAC;MACtIT,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACqE,UAAU,IAAI5C,KAAK,CAACK,QAAQ,CAAC;QAC9CI,SAAS,EAAEA,SAAS,CAACoC;MACvB,CAAC,CAAC,CAAC,CAAC;;MAEJ,IAAI7C,KAAK,CAAC8C,qBAAqB,IAAI9C,KAAK,CAAC9B,KAAK,CAAC6E,YAAY,KAAKtC,SAAS,CAACoC,CAAC,EAAE;QAC3E7C,KAAK,CAAC8C,qBAAqB,CAAC9C,KAAK,CAAC9B,KAAK,CAAC6E,YAAY,EAAEtC,SAAS,CAACoC,CAAC,CAAC;QAElE7C,KAAK,CAACK,QAAQ,CAAC;UACb0C,YAAY,EAAEtC,SAAS,CAACoC;QAC1B,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF7G,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,cAAc,EAAE,UAAUgD,CAAC,EAAE;MAC1E,IAAIC,SAAS,EAAEC,oBAAoB,EAAEC,qBAAqB;MAE1D,IAAInD,KAAK,CAAC9B,KAAK,CAAC+B,oBAAoB,EAAE;QACpCD,KAAK,CAACK,QAAQ,CAAC;UACbJ,oBAAoB,EAAE;QACxB,CAAC,CAAC;MACJ,CAAC,CAAC;MACF;MACA;;MAGA,IAAImD,OAAO,GAAGJ,CAAC,CAACtI,MAAM,IAAIsI,CAAC,CAACtI,MAAM,CAAC0I,OAAO;MAC1C,IAAIC,IAAI,GAAGL,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,SAAS,GAAGD,CAAC,CAACtI,MAAM,MAAM,IAAI,IAAIuI,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,oBAAoB,GAAGD,SAAS,CAACK,UAAU,MAAM,IAAI,IAAIJ,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,qBAAqB,GAAGD,oBAAoB,CAACG,IAAI,MAAM,IAAI,IAAIF,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACjK,KAAK;MAChW,IAAIqK,gBAAgB,GAAG,gBAAgB,CAAChE,MAAM,CAACS,KAAK,CAAC9B,KAAK,CAACE,EAAE,CAAC;MAE9D,IAAIgF,OAAO,CAACI,WAAW,EAAE,KAAK,KAAK,IAAIH,IAAI,KAAKE,gBAAgB,EAAE;QAChEvD,KAAK,CAAC/C,KAAK,CAACwG,YAAY,IAAIzD,KAAK,CAAC/C,KAAK,CAACwG,YAAY,CAACT,CAAC,CAAC;MACzD;IACF,CAAC,CAAC;IAEFhH,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,aAAa,EAAE,UAAU0D,aAAa,EAAE;MACrF,IAAIC,WAAW,GAAG3D,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAAC8D,aAAa,CAAC;MAElD,IAAI1D,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACqF,WAAW,EAAE;QAClC,IAAIC,eAAe,GAAG,CAAC,CAAC,EAAEhK,SAAS,CAACiK,wBAAwB,EAAEJ,aAAa,EAAE1D,KAAK,CAAC9B,KAAK,CAAC6D,KAAK,EAAE/B,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC;QACnH,IAAIwD,KAAK,GAAG,CAAC,CAAC,EAAElI,SAAS,CAACkK,4BAA4B,EAAE/D,KAAK,CAAC9B,KAAK,CAAC6D,KAAK,EAAE8B,eAAe,EAAE7D,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAAC;QAC/G,IAAIJ,OAAO,GAAG,CAAC,CAAC,EAAEtE,SAAS,CAACmK,sBAAsB,EAAEhE,KAAK,CAAC9B,KAAK,CAACC,OAAO,EAAE4D,KAAK,CAAC;QAC/E,IAAIkC,SAAS,GAAGJ,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAAC,GAAG,CAAC;QACtG,IAAIK,WAAW,GAAG,KAAK;QAEvB,IAAID,SAAS,EAAE;UACb,IAAIE,UAAU,GAAGpC,KAAK,CAACkC,SAAS,CAACnJ,MAAM,CAAC,CAACmJ,SAAS,CAACvJ,MAAM,CAAC;UAC1DwJ,WAAW,GAAGC,UAAU,KAAK,CAAC;QAChC;QAEAnE,KAAK,CAACF,KAAK,CAAC;UACViC,KAAK,EAAEA,KAAK;UACZ5D,OAAO,EAAEA;QACX,CAAC,EAAE,YAAY;UACb6B,KAAK,CAAC/C,KAAK,CAACmH,WAAW,IAAIpE,KAAK,CAAC/C,KAAK,CAACmH,WAAW,CAACV,aAAa,EAAEC,WAAW,CAAC;UAE9E,IAAIO,WAAW,EAAE;YACflE,KAAK,CAACjB,oBAAoB,EAAE;UAC9B;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,IAAI,CAACiB,KAAK,CAACqE,cAAc,EAAE;UACzBrE,KAAK,CAACqE,cAAc,GAAGjE,UAAU,CAAC,YAAY;YAC5CJ,KAAK,CAAC/C,KAAK,CAACmH,WAAW,IAAIpE,KAAK,CAAC/C,KAAK,CAACmH,WAAW,CAACV,aAAa,EAAEC,WAAW,CAAC;YAC9E3D,KAAK,CAACqE,cAAc,GAAG,IAAI;UAC7B,CAAC,EAAE3K,MAAM,CAAC,SAAS,CAAC,CAAC4K,sBAAsB,CAAC;QAC9C,CAAC,MAAM;UACLtE,KAAK,CAAC/C,KAAK,CAACsH,iBAAiB,IAAIvE,KAAK,CAAC/C,KAAK,CAACsH,iBAAiB,CAACb,aAAa,EAAEC,WAAW,CAAC;UAC1F3D,KAAK,CAACqE,cAAc,GAAGlE,YAAY,CAACH,KAAK,CAACqE,cAAc,CAAC;QAC3D;MACF;IACF,CAAC,CAAC;IAEFrI,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,kBAAkB,EAAE,UAAUyB,KAAK,EAAErD,EAAE,EAAE;MACtF,IAAIuF,WAAW,GAAG3D,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAACxB,EAAE,CAAC;MACvC4B,KAAK,CAAC/C,KAAK,CAACuH,gBAAgB,IAAIxE,KAAK,CAAC/C,KAAK,CAACuH,gBAAgB,CAAC/C,KAAK,EAAErD,EAAE,EAAEuF,WAAW,CAAC;IACtF,CAAC,CAAC;IAEF3H,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,iBAAiB,EAAE,UAAU5B,EAAE,EAAE;MAC9E,IAAI4B,KAAK,CAACW,cAAc,EAAE;QACxB;MACF;MAEA,IAAIgD,WAAW,GAAG3D,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAACxB,EAAE,CAAC;MACvC4B,KAAK,CAAC/C,KAAK,CAACwH,eAAe,IAAIzE,KAAK,CAAC/C,KAAK,CAACwH,eAAe,CAACrG,EAAE,EAAEuF,WAAW,CAAC;MAC3E3D,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACmG,qBAAqB,IAAI1E,KAAK,CAAC2E,wBAAwB,CAACvG,EAAE,EAAE,IAAI,CAAC;IACtF,CAAC,CAAC;IAEFpC,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,gBAAgB,EAAE,UAAU5B,EAAE,EAAE;MAC7E,IAAI4B,KAAK,CAACW,cAAc,EAAE;QACxB;MACF;MAEA,IAAIgD,WAAW,GAAG3D,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAACxB,EAAE,CAAC;MACvC4B,KAAK,CAAC/C,KAAK,CAAC2H,cAAc,IAAI5E,KAAK,CAAC/C,KAAK,CAAC2H,cAAc,CAACxG,EAAE,EAAEuF,WAAW,CAAC;MACzE3D,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACmG,qBAAqB,IAAI1E,KAAK,CAAC2E,wBAAwB,CAACvG,EAAE,EAAE,KAAK,CAAC;IACvF,CAAC,CAAC;IAEFpC,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,iBAAiB,EAAE,UAAUlF,MAAM,EAAEJ,MAAM,EAAE;MAC1FsF,KAAK,CAAC/C,KAAK,CAAC4H,eAAe,IAAI7E,KAAK,CAAC/C,KAAK,CAAC4H,eAAe,CAAC/J,MAAM,EAAEJ,MAAM,CAAC;MAE1E,IAAIsF,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuG,qBAAqB,EAAE;QAC5C,IAAIC,eAAe,GAAG;UACpBjK,MAAM,EAAEA,MAAM;UACdJ,MAAM,EAAEA;QACV,CAAC;QAEDsF,KAAK,CAACF,KAAK,CAAC;UACViF,eAAe,EAAEA;QACnB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF/I,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,gBAAgB,EAAE,UAAUlF,MAAM,EAAEJ,MAAM,EAAE;MACzFsF,KAAK,CAAC/C,KAAK,CAAC+H,cAAc,IAAIhF,KAAK,CAAC/C,KAAK,CAAC+H,cAAc,CAAClK,MAAM,EAAEJ,MAAM,CAAC;MAExE,IAAIsF,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuG,qBAAqB,EAAE;QAC5C,IAAIC,eAAe,GAAGlD,SAAS;QAE/B7B,KAAK,CAACF,KAAK,CAAC;UACViF,eAAe,EAAEA;QACnB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF/I,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,sBAAsB,EAAE,UAAUiF,IAAI,EAAE;MACrF,IAAI,CAACjF,KAAK,CAAC/C,KAAK,CAAC4D,oBAAoB,EAAE;QACrC;MACF;MAEA,IAAIzC,EAAE,GAAG6G,IAAI,CAAC7G,EAAE;QACZkD,CAAC,GAAG2D,IAAI,CAAC3D,CAAC;QACVE,CAAC,GAAGyD,IAAI,CAACzD,CAAC;MAEdxB,KAAK,CAAC/C,KAAK,CAAC4D,oBAAoB,CAACzC,EAAE,EAAEkD,CAAC,EAAEE,CAAC,CAAC;IAC5C,CAAC,CAAC;IAEFxF,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,iBAAiB,EAAE,YAAY;MAC5E,OAAOA,KAAK,CAAC9B,KAAK,CAACU,UAAU,CAACsG,IAAI,EAAE;IACtC,CAAC,CAAC;IAEFlJ,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,qBAAqB,EAAE,YAAY;MAChF,IAAI,CAACA,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuC,WAAW,EAAE;QACnC,IAAIqE,iBAAiB,GAAG,CAAC,CAAC,EAAErL,OAAO,CAACsL,eAAe,EAAEpF,KAAK,CAAC/C,KAAK,CAACoI,IAAI,CAACzF,KAAK,CAAC;QAE5E,KAAK,IAAI0F,MAAM,IAAItF,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,EAAE;UACpC,IAAIqF,IAAI,GAAGjF,KAAK,CAAC9B,KAAK,CAAC0B,KAAK,CAAC0F,MAAM,CAAC;UAEpC,IAAIL,IAAI,CAACM,EAAE,IAAIN,IAAI,CAACO,EAAE,EAAE;YACtBC,OAAO,CAACC,cAAc,CAACT,IAAI,EAAE,IAAI,CAAC;YAClCQ,OAAO,CAACC,cAAc,CAACT,IAAI,EAAE,IAAI,CAAC;UACpC;UAEA,IAAIK,MAAM,IAAIH,iBAAiB,EAAE;YAC/B,IAAIQ,WAAW,GAAGR,iBAAiB,CAACG,MAAM,CAAC;YAC3CL,IAAI,CAAC3D,CAAC,GAAGqE,WAAW,CAACrE,CAAC;YACtB2D,IAAI,CAACzD,CAAC,GAAGmE,WAAW,CAACnE,CAAC;UACxB;QACF;QAEAxB,KAAK,CAAC9B,KAAK,CAACU,UAAU,CAACoC,WAAW,CAAChB,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACC,EAAE,CAACwC,WAAW,CAAC,CAACC,OAAO,EAAE;QAE/EjB,KAAK,CAACF,KAAK,EAAE;MACf;IACF,CAAC,CAAC;IAEF9D,eAAe,CAACS,sBAAsB,CAACuD,KAAK,CAAC,EAAE,mBAAmB,EAAE,YAAY;MAC9E,OAAO,CAACA,KAAK,CAAC9B,KAAK,CAACK,MAAM,CAACuC,WAAW,IAAId,KAAK,CAAC9B,KAAK,CAACU,UAAU,CAACqC,OAAO,EAAE;IAC5E,CAAC,CAAC;IAEF,IAAI,CAACjB,KAAK,CAAC/C,KAAK,CAACmB,EAAE,EAAE;MACnB,CAAC,CAAC,EAAEpE,MAAM,CAAC4L,QAAQ,EAAE5F,KAAK,CAAC1F,WAAW,CAAC+I,IAAI,EAAEzJ,IAAI,CAAC,SAAS,CAAC,CAACiM,gBAAgB,CAAC;IAChF;IAEA7F,KAAK,CAACE,qBAAqB,GAAG,IAAI;IAClCF,KAAK,CAACqE,cAAc,GAAG,IAAI;IAC3BrE,KAAK,CAACW,cAAc,GAAG,KAAK;IAC5BX,KAAK,CAAC9B,KAAK,GAAG,CAAC,CAAC,EAAEpE,OAAO,CAACgM,oBAAoB,EAAE9F,KAAK,CAAC/C,KAAK,EAAE+C,KAAK,CAAC9B,KAAK,CAAC;IACzE8B,KAAK,CAAC8C,qBAAqB,GAAG9C,KAAK,CAAC/C,KAAK,CAAC8I,YAAY,GAAG,CAAC,CAAC,EAAE/L,MAAM,CAACgM,QAAQ,EAAEhG,KAAK,CAAC/C,KAAK,CAAC8I,YAAY,EAAE,GAAG,CAAC,GAAG,IAAI;IACnH,OAAO/F,KAAK;EACd;EACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE;;EAGA3C,YAAY,CAACS,KAAK,EAAE,CAAC;IACnB/C,GAAG,EAAE,kCAAkC;IACvC7B,KAAK,EAAE,SAAS+M,gCAAgC,CAACC,SAAS,EAAE;MAC1D,IAAIC,qBAAqB,GAAG,CAAC,CAAC,EAAErM,OAAO,CAACsM,4BAA4B,EAAEF,SAAS,EAAE,IAAI,CAAChI,KAAK,CAAC;QACxFmI,oBAAoB,GAAGF,qBAAqB,CAACE,oBAAoB;QACjEC,gBAAgB,GAAGH,qBAAqB,CAACG,gBAAgB;MAE7D,IAAIpI,KAAK,GAAGmI,oBAAoB,GAAG,CAAC,CAAC,EAAEvM,OAAO,CAACgM,oBAAoB,EAAEI,SAAS,EAAE,IAAI,CAAChI,KAAK,CAAC,GAAG,IAAI,CAACA,KAAK;MACxG,IAAIqI,SAAS,GAAGL,SAAS,CAAC3H,MAAM,IAAI,CAAC,CAAC;MAEtC,IAAIiI,qBAAqB,GAAG,CAAC,CAAC,EAAE1M,OAAO,CAAC2M,0BAA0B,EAAEP,SAAS,EAAE,IAAI,CAAChI,KAAK,CAAC;QACtFwI,aAAa,GAAGF,qBAAqB,CAACE,aAAa;QACnDC,eAAe,GAAGH,qBAAqB,CAACG,eAAe;MAE3D,IAAIpI,MAAM,GAAGmI,aAAa,GAAG,CAAC,CAAC,EAAE1M,MAAM,CAAC4M,KAAK,EAAEjN,OAAO,CAAC,SAAS,CAAC,EAAE4M,SAAS,CAAC,GAAG,IAAI,CAACrI,KAAK,CAACK,MAAM,CAAC,CAAC;;MAEnG+H,gBAAgB,IAAI,IAAI,CAAC1E,eAAe,EAAE;MAC1C,IAAInB,SAAS,GAAG8F,SAAS,CAAC3D,UAAU,KAAK,IAAI,CAAC1E,KAAK,CAACK,MAAM,CAACqE,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC1E,KAAK,CAACuC,SAAS;MAChG,IAAIoG,aAAa,GAAGX,SAAS,CAACb,IAAI,CAACwB,aAAa;MAChD,IAAIC,aAAa,GAAG,IAAI,CAAC5I,KAAK,CAAC2B,OAAO,CAACkH,IAAI,CAAC,UAAU9B,IAAI,EAAE;QAC1D,OAAO,EAAE,CAAC1F,MAAM,CAAC0F,IAAI,CAAC7G,EAAE,CAAC,KAAK,EAAE,CAACmB,MAAM,CAACsH,aAAa,CAAC;MACxD,CAAC,CAAC;MACF,IAAIG,aAAa,GAAG,EAAE,CAACzH,MAAM,CAAC,IAAI,CAACrB,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAAC8F,gBAAgB,CAAC;MAC5F,IAAIkB,mBAAmB,GAAG,CAAC,CAAC,EAAE5G,OAAO,CAACmN,8BAA8B,EAAEH,aAAa,EAAE,IAAI,CAAC5I,KAAK,CAACK,MAAM,EAAEyI,aAAa,CAAC,IAAI,IAAI,CAAC9I,KAAK,CAACwC,mBAAmB;MACxJ,IAAIT,oBAAoB,GAAG,IAAI,CAAChD,KAAK,CAACoI,IAAI,CAACwB,aAAa,KAAKX,SAAS,CAACb,IAAI,CAACwB,aAAa,CAAC,CAAC;MAC3F;;MAEA,IAAIX,SAAS,CAACH,YAAY,EAAE;QAC1B,IAAI,CAACjD,qBAAqB,GAAG,CAAC,CAAC,EAAE9I,MAAM,CAACgM,QAAQ,EAAEE,SAAS,CAACH,YAAY,EAAE,GAAG,CAAC;MAChF;MAEA,IAAI,CAAC1F,QAAQ,CAACvE,aAAa,CAAC,CAAC,CAAC,EAAEoC,KAAK,EAAE;QACrCK,MAAM,EAAEA,MAAM;QACdmI,aAAa,EAAEA,aAAa;QAC5BC,eAAe,EAAEA,eAAe;QAChCL,gBAAgB,EAAEA,gBAAgB;QAClC7F,SAAS,EAAEA,SAAS;QACpBoG,aAAa,EAAEA,aAAa;QAC5B5G,oBAAoB,EAAEA,oBAAoB;QAC1CS,mBAAmB,EAAEA;MACvB,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE;IACD3F,GAAG,EAAE,oBAAoB;IACzB7B,KAAK,EAAE,SAASgO,kBAAkB,GAAG;MACnC;MACA,IAAIC,WAAW,GAAG,IAAI,CAACjJ,KAAK,CAACK,MAAM,CAACuC,WAAW,IAAI,IAAI,CAAC5C,KAAK,CAACK,MAAM,CAAC6I,0BAA0B;MAE/F,IAAID,WAAW,EAAE;QACf,IAAI,CAACvF,eAAe,EAAE;MACxB;MAEA,IAAI,CAAC,IAAI,CAAC1D,KAAK,CAACK,MAAM,CAACuC,WAAW,KAAK,IAAI,CAAC5C,KAAK,CAACoI,gBAAgB,IAAI,IAAI,CAACpI,KAAK,CAACyI,eAAe,CAAC,EAAE;QACjG,IAAI,CAACjH,4BAA4B,EAAE;QAEnC,IAAI,CAAC,IAAI,CAACxB,KAAK,CAACK,MAAM,CAAC6I,0BAA0B,EAAE;UACjD,IAAI,CAACC,iBAAiB,EAAE;QAC1B;QAEA,IAAI,CAAChH,QAAQ,CAAC;UACZiG,gBAAgB,EAAE,KAAK;UACvBK,eAAe,EAAE;QACnB,CAAC,CAAC;MACJ,CAAC,MAAM,IAAI,IAAI,CAACzI,KAAK,CAACwI,aAAa,EAAE;QACnC,IAAI,CAAC3H,oBAAoB,EAAE;MAC7B;MAEA,IAAI,IAAI,CAACb,KAAK,CAACwI,aAAa,EAAE;QAC5B,IAAI,CAACY,WAAW,EAAE;QAElB,IAAI,CAACjH,QAAQ,CAAC;UACZqG,aAAa,EAAE;QACjB,CAAC,CAAC;MACJ;IACF;EACF,CAAC,EAAE;IACD3L,GAAG,EAAE,mBAAmB;IACxB7B,KAAK,EAAE,SAASqO,iBAAiB,GAAG;MAClC,IAAI,CAAC,IAAI,CAACrJ,KAAK,CAACK,MAAM,CAACuC,WAAW,EAAE;QAClC,IAAI,CAACpB,4BAA4B,EAAE;MACrC,CAAC,CAAC;;MAGF,IAAI,CAAC4H,WAAW,EAAE;IACpB;EACF,CAAC,EAAE;IACDvM,GAAG,EAAE,sBAAsB;IAC3B7B,KAAK,EAAE,SAASsO,oBAAoB,GAAG;MACrC,IAAI,CAAC5F,eAAe,EAAE;MAEtB,IAAI,IAAI,CAACyC,cAAc,EAAE;QACvBlE,YAAY,CAAC,IAAI,CAACkE,cAAc,CAAC;QACjC,IAAI,CAACA,cAAc,GAAG,IAAI;MAC5B;MAEA,IAAI,IAAI,CAACnE,qBAAqB,EAAE;QAC9BC,YAAY,CAAC,IAAI,CAACD,qBAAqB,CAAC;QACxC,IAAI,CAACA,qBAAqB,GAAG,IAAI;MACnC;IACF;EACF,CAAC,EAAE;IACDnF,GAAG,EAAE,QAAQ;IACb7B,KAAK,EAAE,SAASuO,MAAM,GAAG;MACvB,IAAIC,YAAY,GAAG,CAAC,CAAC,EAAE3N,OAAO,CAAC4N,WAAW,EAAE,IAAI,CAACzJ,KAAK,CAAC0B,KAAK,EAAE;UAC5DwE,WAAW,EAAE,IAAI,CAACA,WAAW;UAC7BG,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;UACzCC,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;UACvCC,eAAe,EAAE,IAAI,CAACA,eAAe;UACrCmD,UAAU,EAAE,IAAI,CAAChD;QACnB,CAAC,EAAE,IAAI,CAAC1G,KAAK,CAACC,OAAO,EAAE,IAAI,CAACD,KAAK,CAAC6D,KAAK,EAAE;UACvC8F,WAAW,EAAE,IAAI,CAAC5K,KAAK,CAAC4K,WAAW;UACnCC,gBAAgB,EAAE,IAAI,CAAC7K,KAAK,CAAC6K,gBAAgB;UAC7CjD,eAAe,EAAE,IAAI,CAACA,eAAe;UACrCG,cAAc,EAAE,IAAI,CAACA;QACvB,CAAC,EAAE,IAAI,CAAC9G,KAAK,CAACK,MAAM,EAAE,IAAI,CAACL,KAAK,CAAC6J,eAAe,EAAE,IAAI,CAAC7J,KAAK,CAAC6G,eAAe,EAAE,IAAI,CAAC7G,KAAK,CAACuC,SAAS,CAAC;QAC/Fb,KAAK,GAAG8H,YAAY,CAAC9H,KAAK;QAC1BmC,KAAK,GAAG2F,YAAY,CAAC3F,KAAK;QAC1BiG,IAAI,GAAGN,YAAY,CAACM,IAAI;MAE5B,IAAIC,QAAQ,GAAG;QACbC,MAAM,EAAE,IAAI,CAAChK,KAAK,CAACK,MAAM,CAAC2J,MAAM;QAChCC,KAAK,EAAE,IAAI,CAACjK,KAAK,CAACK,MAAM,CAAC4J;MAC3B,CAAC;MAED,IAAIC,cAAc,GAAG,IAAI,CAACC,4BAA4B,EAAE;MAExD,OAAOlP,MAAM,CAAC,SAAS,CAAC,CAACmP,aAAa,CAAC,KAAK,EAAE;QAC5ClK,EAAE,EAAE,EAAE,CAACmB,MAAM,CAAC,IAAI,CAACrB,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAAC8F,gBAAgB;MAC7E,CAAC,EAAErG,MAAM,CAAC,SAAS,CAAC,CAACmP,aAAa,CAAC,KAAK,EAAE;QACxCjF,IAAI,EAAE,gBAAgB,CAAC9D,MAAM,CAAC,IAAI,CAACrB,KAAK,CAACE,EAAE,CAAC;QAC5CoC,KAAK,EAAEyH,QAAQ;QACfM,OAAO,EAAE,IAAI,CAAC9E;MAChB,CAAC,EAAEuE,IAAI,EAAE7O,MAAM,CAAC,SAAS,CAAC,CAACmP,aAAa,CAAC,GAAG,EAAE9N,QAAQ,CAAC;QACrD4D,EAAE,EAAE,EAAE,CAACmB,MAAM,CAAC,IAAI,CAACrB,KAAK,CAACE,EAAE,EAAE,GAAG,CAAC,CAACmB,MAAM,CAAC7F,MAAM,CAAC,SAAS,CAAC,CAACgJ,kBAAkB;MAC/E,CAAC,EAAE0F,cAAc,CAAC,EAAErG,KAAK,EAAEnC,KAAK,CAAC,CAAC,CAAC;IACrC;EACF,CAAC,CAAC,CAAC;EAEH,OAAO9B,KAAK;AACd,CAAC,CAAC3E,MAAM,CAAC,SAAS,CAAC,CAACqP,SAAS,CAAC;AAE9BvP,OAAO,CAAC,SAAS,CAAC,GAAG6E,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}